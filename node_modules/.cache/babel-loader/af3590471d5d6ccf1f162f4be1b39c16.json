{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my-app__1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my-app__1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my-app__1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{UserAPI,UserAPI as API}from\"../../components/users/Api\";import{setProfile}from\"./PostsData-reducer\";import{stopSubmit}from\"redux-form\";var initialstate={id:null,email:null,login:null,isAuth:false};var Auth_reducer=function Auth_reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialstate;var action=arguments.length>1?arguments[1]:undefined;if(action.type==='Get_user_data'){return _objectSpread({},state,{},action.payload);}else{return state;}};export var Setuserdata=function Setuserdata(id,email,login,isAuth){return{type:'Get_user_data',payload:{id:id,email:email,login:login,isAuth:isAuth}};};export var setrequire=function setrequire(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response,_response$data$data,id,email,_login;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UserAPI.authrequire();case 2:response=_context.sent;if(response.data.resultCode===0){_response$data$data=response.data.data,id=_response$data$data.id,email=_response$data$data.email,_login=_response$data$data.login;dispatch(Setuserdata(id,email,_login,true));}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var login=function login(email,password,rememberMe){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.login(email,password,rememberMe);case 2:response=_context2.sent;if(response.data.resultCode===0){dispatch(setrequire());}else{message=response.data.messages.length>0?response.data.messages[0]:\"Some error\";dispatch(stopSubmit(\"login\",{_error:message}));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return API.logout();case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(Setuserdata(null,null,null,false));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default Auth_reducer;","map":{"version":3,"sources":["C:/Users/tvirg/OneDrive/Рабочий стол/my-app__1/src/redux/state/Auth_reducer.js"],"names":["UserAPI","API","setProfile","stopSubmit","initialstate","id","email","login","isAuth","Auth_reducer","state","action","type","payload","Setuserdata","setrequire","dispatch","authrequire","response","data","resultCode","password","rememberMe","message","messages","length","_error","logout"],"mappings":"8qBAAA,OAAQA,OAAR,CAAiBA,OAAO,GAAIC,CAAAA,GAA5B,KAAsC,4BAAtC,CACA,OAAQC,UAAR,KAAyB,qBAAzB,CACA,OAAQC,UAAR,KAAyB,YAAzB,CACA,GAAIC,CAAAA,YAAY,CAAG,CACfC,EAAE,CAAE,IADW,CAEfC,KAAK,CAAE,IAFQ,CAGfC,KAAK,CAAE,IAHQ,CAIfC,MAAM,CAAE,KAJO,CAAnB,CAMA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAiC,IAAhCC,CAAAA,KAAgC,2DAAxBN,YAAwB,IAAVO,CAAAA,MAAU,2CAElD,GAAIA,MAAM,CAACC,IAAP,GAAgB,eAApB,CAAoC,CAClC,wBACKF,KADL,IAEOC,MAAM,CAACE,OAFd,EAKC,CANH,IAOO,CACH,MAAOH,CAAAA,KAAP,CACD,CACN,CAZD,CAcA,MAAO,IAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACT,EAAD,CAAKC,KAAL,CAAYC,KAAZ,CAAmBC,MAAnB,CAA6B,CACtD,MAAM,CACFI,IAAI,CAAE,eADJ,CACqBC,OAAO,CAAE,CAACR,EAAE,CAAFA,EAAD,CAAKC,KAAK,CAALA,KAAL,CAAYC,KAAK,CAALA,KAAZ,CAAmBC,MAAM,CAANA,MAAnB,CAD9B,CAAN,CAGD,CAJM,CAKP,MAAO,IAAMO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,kGAAM,iBAAOC,QAAP,yLACPhB,CAAAA,OAAO,CAACiB,WAAR,EADO,QACxBC,QADwB,eAEpB,GAAGA,QAAQ,CAACC,IAAT,CAAcC,UAAd,GAA6B,CAAhC,CAAkC,qBACLF,QAAQ,CAACC,IAAT,CAAcA,IADT,CACzBd,EADyB,qBACzBA,EADyB,CACrBC,KADqB,qBACrBA,KADqB,CACdC,MADc,qBACdA,KADc,CAE9BS,QAAQ,CAACF,WAAW,CAACT,EAAD,CAAKC,KAAL,CAAYC,MAAZ,CAAmB,IAAnB,CAAZ,CAAR,CACH,CALmB,sDAAN,gEAAnB,CAOP,MAAO,IAAMA,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACD,KAAD,CAAQe,QAAR,CAAkBC,UAAlB,kGAAiC,kBAAON,QAAP,kKAC7Bf,CAAAA,GAAG,CAACM,KAAJ,CAAUD,KAAV,CAAiBe,QAAjB,CAA2BC,UAA3B,CAD6B,QAC9CJ,QAD8C,gBAE1C,GAAIA,QAAQ,CAACC,IAAT,CAAcC,UAAd,GAA6B,CAAjC,CAAoC,CAChCJ,QAAQ,CAACD,UAAU,EAAX,CAAR,CACH,CAFD,IAEK,CACGQ,OADH,CACaL,QAAQ,CAACC,IAAT,CAAcK,QAAd,CAAuBC,MAAvB,CAAgC,CAAhC,CAAoCP,QAAQ,CAACC,IAAT,CAAcK,QAAd,CAAuB,CAAvB,CAApC,CAAgE,YAD7E,CAEDR,QAAQ,CAACb,UAAU,CAAC,OAAD,CAAU,CAACuB,MAAM,CAAEH,OAAT,CAAV,CAAX,CAAR,CACH,CAPyC,wDAAjC,kEAAd,CASH,MAAO,IAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,mGAAM,kBAAOX,QAAP,0JACHf,CAAAA,GAAG,CAAC0B,MAAJ,EADG,QACpBT,QADoB,gBAEhB,GAAIA,QAAQ,CAACC,IAAT,CAAcC,UAAd,GAA6B,CAAjC,CAAoC,CAChCJ,QAAQ,CAACF,WAAW,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmB,KAAnB,CAAZ,CAAR,CACH,CAJe,wDAAN,kEAAf,CAOX,cAAeL,CAAAA,YAAf","sourcesContent":["import {UserAPI, UserAPI as API} from \"../../components/users/Api\";\nimport {setProfile} from \"./PostsData-reducer\";\nimport {stopSubmit} from \"redux-form\";\nlet initialstate = {\n    id: null,\n    email: null,\n    login: null,\n    isAuth: false\n}\nconst Auth_reducer = (state = initialstate, action) =>{\n\n    if (action.type === 'Get_user_data'){\n      return{\n        ...state,\n          ...action.payload\n      }\n      \n      }\n      else {\n        return state;\n      }\n}\n\nexport const Setuserdata = (id, email, login, isAuth) =>{\n  return{\n      type: 'Get_user_data', payload: {id, email, login, isAuth}\n  }\n}\nexport const setrequire = () => async (dispatch) => {\n    let response = await UserAPI.authrequire();\n            if(response.data.resultCode === 0){\n                let {id, email, login} = response.data.data;\n                dispatch(Setuserdata(id, email, login, true));\n            }\n}\nexport const login = (email, password, rememberMe) => async (dispatch) => {\n    let response = await API.login(email, password, rememberMe);\n            if (response.data.resultCode === 0) {\n                dispatch(setrequire())\n            }else{\n                let message = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\n                dispatch(stopSubmit(\"login\", {_error: message}));\n            }\n}\n    export const logout = () => async (dispatch) => {\n        let response = await API.logout();\n                if (response.data.resultCode === 0) {\n                    dispatch(Setuserdata(null, null, null, false));\n                }\n\n}\nexport default Auth_reducer;\n"]},"metadata":{},"sourceType":"module"}