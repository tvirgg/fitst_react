{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\tvirg\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\my app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{getUsers,UserAPI}from\"../../components/users/Api\";import{updateObjectInArray}from\"../../utils/object-helpers\";var initialstate={users:[],pageSize:4,totalUsersCount:0,curentPage:1,isFetcing:true,followingInProgress:[]};export var r=function r(a){console.log(a);};var UsersReducer=function UsersReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialstate;var action=arguments.length>1?arguments[1]:undefined;if(action.type==='follow'){return _objectSpread({},state,{users:updateObjectInArray(state.users,action.userID,\"id\",{followed:true})});}else if(action.type==='unfollow'){return _objectSpread({},state,{users:updateObjectInArray(state.users,action.userID,\"id\",{followed:false})});}else if(action.type==='following_InProgress'){return _objectSpread({},state,{followingInProgress:action.isFetcing?[].concat(_toConsumableArray(state.followingInProgress),[action.userID]):state.followingInProgress.filter(function(id){return id!=action.userID;})});}else if(action.type==='set_user'){return _objectSpread({},state,{users:action.users});}else if(action.type==='set_TotalCount'){return _objectSpread({},state,{totalUsersCount:action.totalCount});}else if(action.type==='set_curentPage'){return _objectSpread({},state,{curentPage:action.curentPage});}else if(action.type==='togle_fetch'){return _objectSpread({},state,{isFetcing:action.isFetcing});}else{return state;}};export var fallowSEC=function fallowSEC(userID){return{type:'follow',userID:userID};};export var unfallowSEC=function unfallowSEC(userID){return{type:'unfollow',userID:userID};};export var toggleisFetcing=function toggleisFetcing(isFetcing){return{type:'togle_fetch',isFetcing:isFetcing};};export var setuser=function setuser(users){return{type:'set_user',users:users};};export var togglefollowingInProgress=function togglefollowingInProgress(isFetcing,userID){return{type:'following_InProgress',isFetcing:isFetcing,userID:userID};};export var SetCurrentPage=function SetCurrentPage(p){return{type:'set_curentPage',curentPage:p};};export var setTotalCount=function setTotalCount(TotalCount){return{type:'set_TotalCount',totalCount:TotalCount};};export var getUsersC=function getUsersC(curentPage,pageSize){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(toggleisFetcing(true));_context.next=3;return UserAPI.getUsers(curentPage,pageSize);case 3:data=_context.sent;dispatch(toggleisFetcing(false));dispatch(SetCurrentPage(curentPage));dispatch(setuser(data.items));dispatch(setTotalCount(data.totalCount));case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};var followUnfollowFlow=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,UId,apiMethod,actionCreator){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(togglefollowingInProgress(true,UId));_context2.next=3;return apiMethod(UId);case 3:response=_context2.sent;if(response.data.resultCode==0){dispatch(actionCreator(UId));}dispatch(togglefollowingInProgress(false,UId));case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function followUnfollowFlow(_x2,_x3,_x4,_x5){return _ref2.apply(this,arguments);};}();export var fallow=function fallow(UId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:followUnfollowFlow(dispatch,UId,UserAPI.Follow.bind(UId),fallowSEC);case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x6){return _ref3.apply(this,arguments);};}();};export var unfallow=function unfallow(userId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:followUnfollowFlow(dispatch,userId,UserAPI.Unfollow.bind(userId),unfallowSEC);case 1:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7){return _ref4.apply(this,arguments);};}();};export default UsersReducer;","map":{"version":3,"sources":["C:/Users/tvirg/OneDrive/Рабочий стол/my app/src/redux/state/Users-reducer.js"],"names":["getUsers","UserAPI","updateObjectInArray","initialstate","users","pageSize","totalUsersCount","curentPage","isFetcing","followingInProgress","r","a","console","log","UsersReducer","state","action","type","userID","followed","filter","id","totalCount","fallowSEC","unfallowSEC","toggleisFetcing","setuser","togglefollowingInProgress","SetCurrentPage","p","setTotalCount","TotalCount","getUsersC","dispatch","data","items","followUnfollowFlow","UId","apiMethod","actionCreator","response","resultCode","fallow","Follow","bind","unfallow","userId","Unfollow"],"mappings":"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","sourcesContent":["import {getUsers, UserAPI} from \"../../components/users/Api\";\nimport {updateObjectInArray} from \"../../utils/object-helpers\";\n\nlet initialstate = {\n    users: [],\n    pageSize: 4,\n    totalUsersCount: 0,\n    curentPage: 1,\n    isFetcing: true,\n    followingInProgress: []\n};\nexport const r = (a) =>{\n    console.log(a);\n}\nconst UsersReducer = (state = initialstate, action) => {\n    if (action.type === 'follow') {\n        return {\n            ...state,\n            users: updateObjectInArray(state.users, action.userID, \"id\", {followed: true} )\n        }\n    } else if (action.type === 'unfollow') {\n        return {\n            ...state,\n            users: updateObjectInArray(state.users, action.userID, \"id\", {followed: false} )\n        }\n    }else if (action.type === 'following_InProgress') {\n    return {\n        ...state,\n        followingInProgress: action.isFetcing\n            ? [...state.followingInProgress, action.userID]\n            : state.followingInProgress.filter(id => id != action.userID)}\n    }else if (action.type === 'set_user') {\n        return {\n            ...state, users: action.users }\n    } else if (action.type === 'set_TotalCount') {\n        return {...state, totalUsersCount: action.totalCount}\n    }else if (action.type === 'set_curentPage') {\n        return {...state, curentPage: action.curentPage}\n    }else if (action.type === 'togle_fetch') {\n        return {...state, isFetcing : action.isFetcing}\n    }else {\n        return state;\n    }\n};\nexport const fallowSEC = (userID) => {\n    return {\n        type: 'follow',\n        userID\n    }\n};\n\nexport const unfallowSEC = (userID) => {\n    return {\n        type: 'unfollow',\n        userID\n    }\n};\nexport const toggleisFetcing = (isFetcing) => ({type: 'togle_fetch', isFetcing });\nexport const setuser = (users) => ({type: 'set_user', users});\nexport const togglefollowingInProgress = (isFetcing, userID) => ({type: 'following_InProgress', isFetcing, userID});\nexport const SetCurrentPage = (p) =>({type: 'set_curentPage', curentPage: p});\nexport const setTotalCount = (TotalCount) =>({type: 'set_TotalCount', totalCount: TotalCount});\n\nexport const getUsersC = (curentPage, pageSize) => {\n    return async (dispatch) => {\n    dispatch(toggleisFetcing(true));\n       let data =  await UserAPI.getUsers(curentPage, pageSize);\n        dispatch(toggleisFetcing(false));\n        dispatch(SetCurrentPage(curentPage));\n        dispatch(setuser(data.items));\n        dispatch(setTotalCount(data.totalCount)\n)};\n};\n\nconst followUnfollowFlow = async (dispatch, UId, apiMethod, actionCreator) => {\n    dispatch(togglefollowingInProgress(true, UId));\n    let response = await apiMethod(UId);\n    if (response.data.resultCode == 0) {\n        dispatch(actionCreator(UId));\n    }\n    dispatch(togglefollowingInProgress(false, UId));\n}\nexport const fallow = (UId) => {\n    return async (dispatch) => {\n        followUnfollowFlow(dispatch, UId, UserAPI.Follow.bind(UId), fallowSEC);\n    }}\n    export const unfallow = (userId) => {\n        return async (dispatch) => {\n            followUnfollowFlow(dispatch, userId, UserAPI.Unfollow.bind(userId), unfallowSEC);\n        }\n    }\n\n\nexport default UsersReducer;\n"]},"metadata":{},"sourceType":"module"}